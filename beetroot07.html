<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.25.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.14.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.22.2"></script>
</head>

<body>
    <h1>Chinese GDP by Province Data Visiualisation</h1>
    <h5>Powered by <b>Yi Chen</b></h5>

    <div>这是中间的部分1</div>
    <div>Select the year you want to see:
        <input type="range" id="yearSlider" min="2002" max="2019" value="2002" oninput="updateChart()" />
        <span id="selectedYear">2002</span>
    </div>
    <div id="vis2"></div>

    
    <div>这是中间的部分2</div>
    <div id="vis1"></div>

    

    <script>
        const data = [
            {
                "GDP(billion$)": "Beijing",
                "2000": 35.41,
                "2001": 53.01,
                "2002": 61.86,
                "2003": 71.77,
                "2004": 86.58,
                "2005": 99.56,
                "2006": 115.97,
                "2007": 140.67,
                "2008": 158.79,
                "2009": 173.61,
                "2010": 201.62,
                "2011": 232.17,
                "2012": 255.42,
                "2013": 282.87,
                "2014": 304.73,
                "2015": 328.78,
                "2016": 366.7,
                "2017": 400.21,
                "2018": 433.14,
                "2019": 505.3
            },
            {
                "GDP(billion$)": "Tianjin",
                "2000": 23.42,
                "2001": 27.42,
                "2002": 30.73,
                "2003": 36.83,
                "2004": 44.44,
                "2005": 55.79,
                "2006": 63.75,
                "2007": 75.04,
                "2008": 95.99,
                "2009": 107.46,
                "2010": 131.78,
                "2011": 161.53,
                "2012": 184.2,
                "2013": 206.31,
                "2014": 224.67,
                "2015": 236.26,
                "2016": 255.51,
                "2017": 264.99,
                "2018": 268.71,
                "2019": 201.49
            },
            {
                "GDP(billion$)": "Hebei",
                "2000": 72.7,
                "2001": 78.81,
                "2002": 85.98,
                "2003": 98.88,
                "2004": 121.11,
                "2005": 143.03,
                "2006": 163.82,
                "2007": 194.39,
                "2008": 228.74,
                "2009": 246.22,
                "2010": 291.35,
                "2011": 350.23,
                "2012": 379.64,
                "2013": 406.33,
                "2014": 420.3,
                "2015": 425.8,
                "2016": 458.15,
                "2017": 485.95,
                "2018": 514.43,
                "2019": 501.49
            },
            {
                "GDP(billion$)": "Shanxi",
                "2000": 23.48,
                "2001": 28.99,
                "2002": 33.21,
                "2003": 40.79,
                "2004": 51.02,
                "2005": 60.44,
                "2006": 69.69,
                "2007": 86.06,
                "2008": 104.51,
                "2009": 105.12,
                "2010": 131.44,
                "2011": 160.54,
                "2012": 173.04,
                "2013": 180.93,
                "2014": 182.31,
                "2015": 182.38,
                "2016": 186.43,
                "2017": 221.83,
                "2018": 240.26,
                "2019": 243.24
            },
            {
                "GDP(billion$)": "Inner Mongolia",
                "2000": 20.01,
                "2001": 24.48,
                "2002": 27.73,
                "2003": 34.12,
                "2004": 43.44,
                "2005": 55.79,
                "2006": 70.63,
                "2007": 91.76,
                "2008": 121.37,
                "2009": 139.15,
                "2010": 166.74,
                "2011": 205.14,
                "2012": 226.87,
                "2013": 241.66,
                "2014": 253.86,
                "2015": 254.74,
                "2016": 258.97,
                "2017": 229.95,
                "2018": 246.99,
                "2019": 245.89
            },
            {
                "GDP(billion$)": "Liaoning",
                "2000": 66.7,
                "2001": 71.9,
                "2002": 77.97,
                "2003": 85.75,
                "2004": 95.31,
                "2005": 114.96,
                "2006": 132.92,
                "2007": 159.49,
                "2008": 195.27,
                "2009": 217.32,
                "2010": 263.68,
                "2011": 317.52,
                "2012": 354.95,
                "2013": 388.76,
                "2014": 408.95,
                "2015": 409.56,
                "2016": 317.81,
                "2017": 334.42,
                "2018": 361.65,
                "2019": 355.85
            },
            {
                "GDP(billion$)": "Jilin",
                "2000": 26.02,
                "2001": 30.29,
                "2002": 33.55,
                "2003": 38.03,
                "2004": 44.6,
                "2005": 51.72,
                "2006": 61.07,
                "2007": 75.5,
                "2008": 91.8,
                "2009": 103.98,
                "2010": 123.82,
                "2011": 150.98,
                "2012": 170.56,
                "2013": 186.38,
                "2014": 197.19,
                "2015": 200.9,
                "2016": 211.1,
                "2017": 213.49,
                "2018": 215.35,
                "2019": 167.53
            },
            {
                "GDP(billion$)": "Heilongjiang",
                "2000": 46.47,
                "2001": 48.43,
                "2002": 51.96,
                "2003": 57.96,
                "2004": 67.87,
                "2005": 78.77,
                "2006": 88.74,
                "2007": 101.49,
                "2008": 118.78,
                "2009": 122.67,
                "2010": 148.12,
                "2011": 179.74,
                "2012": 195.59,
                "2013": 206.5,
                "2014": 214.85,
                "2015": 215.48,
                "2016": 219.8,
                "2017": 227.18,
                "2018": 233.74,
                "2019": 194.47
            },
            {
                "GDP(billion$)": "Shanghai",
                "2000": 65.02,
                "2001": 74.43,
                "2002": 82.01,
                "2003": 95.63,
                "2004": 115.33,
                "2005": 132.11,
                "2006": 151.03,
                "2007": 178.49,
                "2008": 201,
                "2009": 214.95,
                "2010": 245.23,
                "2011": 274.22,
                "2012": 288.31,
                "2013": 311.69,
                "2014": 336.68,
                "2015": 358.91,
                "2016": 402.55,
                "2017": 437.61,
                "2018": 466.86,
                "2019": 545.08
            },
            {
                "GDP(billion$)": "Jiangsu",
                "2000": 122.61,
                "2001": 135.1,
                "2002": 151.53,
                "2003": 177.76,
                "2004": 214.34,
                "2005": 265.7,
                "2006": 310.6,
                "2007": 371.69,
                "2008": 442.6,
                "2009": 492.25,
                "2010": 591.79,
                "2011": 701.58,
                "2012": 772.26,
                "2013": 853.62,
                "2014": 929.83,
                "2015": 1001.66,
                "2016": 1105.55,
                "2017": 1226.71,
                "2018": 1322.79,
                "2019": 1423.31
            },
            {
                "GDP(billion$)": "Zhejiang",
                "2000": 86.23,
                "2001": 98.55,
                "2002": 114.34,
                "2003": 138.64,
                "2004": 166.41,
                "2005": 191.68,
                "2006": 224.55,
                "2007": 267.91,
                "2008": 306.61,
                "2009": 328.43,
                "2010": 396.03,
                "2011": 461.7,
                "2012": 495.22,
                "2013": 539.38,
                "2014": 573.9,
                "2015": 612.66,
                "2016": 675.02,
                "2017": 739.55,
                "2018": 802.82,
                "2019": 890.74
            },
            {
                "GDP(billion$)": "Anhui",
                "2000": 43.4,
                "2001": 46.38,
                "2002": 50.28,
                "2003": 56.04,
                "2004": 67.99,
                "2005": 76.43,
                "2006": 87.32,
                "2007": 105.16,
                "2008": 126.45,
                "2009": 143.75,
                "2010": 176.56,
                "2011": 218.58,
                "2012": 245.89,
                "2013": 274.7,
                "2014": 297.84,
                "2015": 314.37,
                "2016": 348.68,
                "2017": 385.97,
                "2018": 428.67,
                "2019": 530.2
            },
            {
                "GDP(billion$)": "Fujian",
                "2000": 56,
                "2001": 58.18,
                "2002": 63.82,
                "2003": 71.2,
                "2004": 82.33,
                "2005": 93.64,
                "2006": 108.34,
                "2007": 132.12,
                "2008": 154.61,
                "2009": 174.81,
                "2010": 210.53,
                "2011": 250.86,
                "2012": 281.45,
                "2013": 312.41,
                "2014": 343.65,
                "2015": 371.14,
                "2016": 411.58,
                "2017": 459.74,
                "2018": 511.49,
                "2019": 605.64
            },
            {
                "GDP(billion$)": "Jiangxi",
                "2000": 28.62,
                "2001": 31.08,
                "2002": 35.01,
                "2003": 40.11,
                "2004": 49.38,
                "2005": 57.95,
                "2006": 68.86,
                "2007": 82.86,
                "2008": 99.59,
                "2009": 109.36,
                "2010": 135.02,
                "2011": 167.18,
                "2012": 184.98,
                "2013": 205.86,
                "2014": 224.49,
                "2015": 238.91,
                "2016": 264.27,
                "2017": 285.8,
                "2018": 314.07,
                "2019": 353.68
            },
            {
                "GDP(billion$)": "Shandong",
                "2000": 122.03,
                "2001": 131.36,
                "2002": 146.79,
                "2003": 172.55,
                "2004": 214.6,
                "2005": 262.38,
                "2006": 312.86,
                "2007": 368.24,
                "2008": 441.9,
                "2009": 484.24,
                "2010": 559.57,
                "2011": 648.03,
                "2012": 714.47,
                "2013": 789,
                "2014": 848.95,
                "2015": 900.03,
                "2016": 971.78,
                "2017": 1037.63,
                "2018": 1092.42,
                "2019": 1015.25
            },
            {
                "GDP(billion$)": "Henan",
                "2000": 73.4,
                "2001": 79.04,
                "2002": 86.22,
                "2003": 98.11,
                "2004": 122.2,
                "2005": 151.25,
                "2006": 176.61,
                "2007": 214.46,
                "2008": 257.41,
                "2009": 278.29,
                "2010": 329.89,
                "2011": 384.73,
                "2012": 422.85,
                "2013": 459.88,
                "2014": 499.12,
                "2015": 528.6,
                "2016": 578.17,
                "2017": 636.47,
                "2018": 686.51,
                "2019": 775.13
            },
            {
                "GDP(billion$)": "Hubei",
                "2000": 61.09,
                "2001": 55.44,
                "2002": 60.18,
                "2003": 67.96,
                "2004": 80.47,
                "2005": 94.15,
                "2006": 108.82,
                "2007": 133.33,
                "2008": 161.84,
                "2009": 185.16,
                "2010": 228.11,
                "2011": 280.46,
                "2012": 317.86,
                "2013": 354.17,
                "2014": 391.13,
                "2015": 422.15,
                "2016": 466.65,
                "2017": 506.83,
                "2018": 562.38,
                "2019": 654.69
            },
            {
                "GDP(billion$)": "Hunan",
                "2000": 52.74,
                "2001": 54.74,
                "2002": 59.31,
                "2003": 66.57,
                "2004": 80.6,
                "2005": 94.23,
                "2006": 109.84,
                "2007": 134.85,
                "2008": 165.07,
                "2009": 186.57,
                "2010": 229.11,
                "2011": 280.99,
                "2012": 316.49,
                "2013": 351.74,
                "2014": 386.25,
                "2015": 412.89,
                "2016": 450.73,
                "2017": 484.33,
                "2018": 520.37,
                "2019": 567.89
            },
            {
                "GDP(billion$)": "Guangdong",
                "2000": 138.03,
                "2001": 171.99,
                "2002": 192.89,
                "2003": 226.35,
                "2004": 269.49,
                "2005": 322.25,
                "2006": 379.83,
                "2007": 453.96,
                "2008": 525.67,
                "2009": 564.04,
                "2010": 657.33,
                "2011": 760.15,
                "2012": 815.26,
                "2013": 892.5,
                "2014": 968.71,
                "2015": 1040.18,
                "2016": 1155.07,
                "2017": 1281.5,
                "2018": 1389.68,
                "2019": 1538.16
            },
            {
                "GDP(billion$)": "Guangxi",
                "2000": 29.29,
                "2001": 32.56,
                "2002": 36.05,
                "2003": 40.3,
                "2004": 49.05,
                "2005": 56.92,
                "2006": 67.8,
                "2007": 83.19,
                "2008": 100.3,
                "2009": 110.85,
                "2010": 136.71,
                "2011": 167.44,
                "2012": 186.22,
                "2013": 206.43,
                "2014": 223.9,
                "2015": 240.04,
                "2016": 261.68,
                "2017": 264.62,
                "2018": 290.75,
                "2019": 303.39
            },
            {
                "GDP(billion$)": "Hainan",
                "2000": 7.41,
                "2001": 7.98,
                "2002": 8.89,
                "2003": 9.9,
                "2004": 11.41,
                "2005": 12.83,
                "2006": 14.93,
                "2007": 17.92,
                "2008": 21.47,
                "2009": 23.63,
                "2010": 29.49,
                "2011": 36.04,
                "2012": 40.79,
                "2013": 45.39,
                "2014": 50.01,
                "2015": 52.9,
                "2016": 57.9,
                "2017": 63.75,
                "2018": 69.03,
                "2019": 75.84
            },
            {
                "GDP(billion$)": "Chongqing",
                "2000": 22.7,
                "2001": 25.22,
                "2002": 28.43,
                "2003": 32.47,
                "2004": 38.47,
                "2005": 49.54,
                "2006": 55.82,
                "2007": 66.8,
                "2008": 82.77,
                "2009": 93.29,
                "2010": 113.22,
                "2011": 143.02,
                "2012": 162.99,
                "2013": 182.62,
                "2014": 203.75,
                "2015": 224.53,
                "2016": 253.44,
                "2017": 277.5,
                "2018": 290.9,
                "2019": 337.23
            },
            {
                "GDP(billion$)": "Sichuan",
                "2000": 57.29,
                "2001": 61.34,
                "2002": 67.5,
                "2003": 76.19,
                "2004": 91.14,
                "2005": 105.5,
                "2006": 124.15,
                "2007": 150.89,
                "2008": 180.02,
                "2009": 202.16,
                "2010": 245.51,
                "2011": 300.38,
                "2012": 341.04,
                "2013": 377.03,
                "2014": 407.67,
                "2015": 429.33,
                "2016": 470.49,
                "2017": 528.29,
                "2018": 581.12,
                "2019": 665.94
            },
            {
                "GDP(billion$)": "Guizhou",
                "2000": 14.19,
                "2001": 16.19,
                "2002": 17.76,
                "2003": 20.38,
                "2004": 23.97,
                "2005": 28.65,
                "2006": 33.41,
                "2007": 41.2,
                "2008": 50.88,
                "2009": 55.9,
                "2010": 65.75,
                "2011": 81.45,
                "2012": 97.89,
                "2013": 115.53,
                "2014": 132.38,
                "2015": 150.04,
                "2016": 168.24,
                "2017": 193.44,
                "2018": 211.52,
                "2019": 239.56
            },
            {
                "GDP(billion$)": "Yunnan",
                "2000": 27.93,
                "2001": 30.55,
                "2002": 33.04,
                "2003": 36.51,
                "2004": 44.03,
                "2005": 49.45,
                "2006": 56.97,
                "2007": 68.18,
                "2008": 81.32,
                "2009": 88.14,
                "2010": 103.2,
                "2011": 127.04,
                "2012": 147.28,
                "2013": 169.03,
                "2014": 183.07,
                "2015": 194.56,
                "2016": 211.26,
                "2017": 233.95,
                "2018": 255.44,
                "2019": 331.77
            },
            {
                "GDP(billion$)": "Tibet",
                "2000": 1.68,
                "2001": 2.09,
                "2002": 2.38,
                "2003": 2.7,
                "2004": 3.15,
                "2005": 3.55,
                "2006": 4.15,
                "2007": 4.88,
                "2008": 5.64,
                "2009": 6.31,
                "2010": 7.25,
                "2011": 8.65,
                "2012": 10.01,
                "2013": 11.65,
                "2014": 13.15,
                "2015": 14.66,
                "2016": 16.45,
                "2017": 18.73,
                "2018": 21.11,
                "2019": 24.25
            },
            {
                "GDP(billion$)": "Shaanxi",
                "2000": 23.73,
                "2001": 28.72,
                "2002": 32.19,
                "2003": 36.97,
                "2004": 45.37,
                "2005": 56.2,
                "2006": 67.77,
                "2007": 82.25,
                "2008": 104.49,
                "2009": 116.71,
                "2010": 144.62,
                "2011": 178.75,
                "2012": 206.48,
                "2013": 231.51,
                "2014": 252.71,
                "2015": 257.46,
                "2016": 277.14,
                "2017": 312.84,
                "2018": 349.12,
                "2019": 368.47
            },
            {
                "GDP(billion$)": "Gansu",
                "2000": 14.05,
                "2001": 16.08,
                "2002": 17.6,
                "2003": 20,
                "2004": 24.12,
                "2005": 27.63,
                "2006": 32.52,
                "2007": 38.61,
                "2008": 45.24,
                "2009": 48.39,
                "2010": 58.87,
                "2011": 71.72,
                "2012": 80.72,
                "2013": 90.44,
                "2014": 97.67,
                "2015": 97,
                "2016": 102.86,
                "2017": 106.57,
                "2018": 117.8,
                "2019": 124.55
            },
            {
                "GDP(billion$)": "Qinghai",
                "2000": 3.77,
                "2001": 4.29,
                "2002": 4.87,
                "2003": 5.57,
                "2004": 6.66,
                "2005": 7.76,
                "2006": 9.26,
                "2007": 11.39,
                "2008": 14.55,
                "2009": 15.45,
                "2010": 19.29,
                "2011": 23.86,
                "2012": 27.05,
                "2013": 30.32,
                "2014": 32.9,
                "2015": 34.53,
                "2016": 36.75,
                "2017": 37.5,
                "2018": 40.93,
                "2019": 42.37
            },
            {
                "GDP(billion$)": "Ningxia",
                "2000": 3.79,
                "2001": 4.82,
                "2002": 5.39,
                "2003": 6.36,
                "2004": 7.67,
                "2005": 8.75,
                "2006": 10.37,
                "2007": 13.13,
                "2008": 17.2,
                "2009": 19.33,
                "2010": 24.14,
                "2011": 30.03,
                "2012": 33.45,
                "2013": 36.82,
                "2014": 39.32,
                "2015": 41.6,
                "2016": 45.27,
                "2017": 49.19,
                "2018": 52.93,
                "2019": 53.55
            },
            {
                "GDP(billion$)": "Xinjiang",
                "2000": 19.49,
                "2001": 21.31,
                "2002": 23.04,
                "2003": 26.95,
                "2004": 31.56,
                "2005": 37.2,
                "2006": 43.5,
                "2007": 50.33,
                "2008": 59.76,
                "2009": 61.1,
                "2010": 77.68,
                "2011": 94.43,
                "2012": 107.22,
                "2013": 120.63,
                "2014": 132.48,
                "2015": 133.21,
                "2016": 137.85,
                "2017": 155.46,
                "2018": 174.27,
                "2019": 194.24
            }
        ];


        const transformedData = [];
        data.forEach(d => {
            for (let year = 2000; year <= 2019; year++) {
                transformedData.push({
                    'GDP(billion$)': d['GDP(billion$)'],
                    'Year': year,
                    'Value': d[year.toString()]
                });
            }
        });

        const spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "GDP Growth (2000-2019)",
            "data": {
                "values": transformedData
            },
            "padding": {
                "left": 50,  // padding for y-axis labels
                "bottom": 40,  // padding for x-axis labels
                "right": 150,  // padding for legend
                "top": 50
            },
            "width": 720, // reduced width
            "height": 500, // reduced height
            "config": {
                "axis": {
                    "labelFontSize": 12, // adjust as needed
                    "titleFontSize": 14  // adjust as needed
                },
                "legend": {
                    "labelFontSize": 12, // adjust as needed
                    "titleFontSize": 14,  // adjust as needed
                    "symbolLimit": 50
                }
            },
            "selection": {
                "region_filter": {
                    "type": "multi",
                    "fields": ["GDP(billion$)"],
                    "bind": "legend",
                    "init": transformedData.reduce((acc, curr) => {
                        if (!acc["GDP(billion$)"]) {
                            acc["GDP(billion$)"] = [];
                        }
                        acc["GDP(billion$)"].push(curr["GDP(billion$)"]);
                        return acc;
                    }, {})
                },
                "legend_select": {
                    "type": "multi",
                    "fields": ["GDP(billion$)"],
                    "bind": "legend"
                }
            },
            "transform": [
                { "filter": { "selection": "region_filter" } }
            ],
            "mark": "line",
            "encoding": {
                "x": {
                    "field": "Year",
                    "type": "ordinal",
                    "title": "Year"
                },
                "y": {
                    "field": "Value",
                    "type": "quantitative",
                    "title": "GDP (in billion $)",
                    "scale": { "domain": [0, 1600] }
                },
                "color": {
                    "field": "GDP(billion$)",
                    "type": "nominal",
                    "title": "Region"
                },
                "tooltip": [
                    { "field": "Year", "type": "ordinal" },
                    { "field": "Value", "type": "quantitative", "title": "GDP (in billion $)" },
                    { "field": "GDP(billion$)", "type": "nominal", "title": "Region" }
                ]
            },
        };

        vegaEmbed("#vis1", spec, { mode: "vega-lite" }).then(console.log).catch(console.warn);
    </script>
    <script>
        const baseSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "China GDP Analysis by Province from 2002-2019",
            "width": 1000,
            "height": 800,
            "projection": { "type": "mercator", "center": [104, 37], "scale": 700 },
            "data": {
                "url": "https://gw.alipayobjects.com/os/alisis/geo-data-v0.1.2/choropleth-data/country/100000_country_province.topo.json",
                "format": { "type": "topojson", "feature": "json" }
            },
            "transform": [
                {
                    "lookup": "properties.name",
                    "from": {
                        "data": {
                            "values": [
                                {
                                    "2002": 3.45,
                                    "2003": 3.68,
                                    "2004": 4.38,
                                    "2005": 4.9,
                                    "2006": 5.58,
                                    "2007": 6.6,
                                    "2008": 7.23,
                                    "2009": 7.59,
                                    "2010": 8.42,
                                    "2011": 9.18,
                                    "2012": 9.61,
                                    "2013": 10.09,
                                    "2014": 10.57,
                                    "2015": 11.12,
                                    "2016": 12.14,
                                    "2017": 13.02,
                                    "2018": 13.97,
                                    "2019": 16.28,
                                    "id_short": "北京",
                                    "id": "北京市",
                                    "id_english": "Beijing"
                                },
                                {
                                    "2002": 2.24,
                                    "2003": 2.58,
                                    "2004": 3.1,
                                    "2005": 3.88,
                                    "2006": 4.41,
                                    "2007": 5.13,
                                    "2008": 6.44,
                                    "2009": 7,
                                    "2010": 8.27,
                                    "2011": 9.62,
                                    "2012": 10.5,
                                    "2013": 11.12,
                                    "2014": 11.61,
                                    "2015": 11.7,
                                    "2016": 12.15,
                                    "2017": 12.23,
                                    "2018": 12.16,
                                    "2019": 9.03,
                                    "id_short": "天津",
                                    "id": "天津市",
                                    "id_english": "Tianjin"
                                },
                                {
                                    "2002": 0.91,
                                    "2003": 1.04,
                                    "2004": 1.27,
                                    "2005": 1.49,
                                    "2006": 1.69,
                                    "2007": 2,
                                    "2008": 2.34,
                                    "2009": 2.5,
                                    "2010": 2.94,
                                    "2011": 3.51,
                                    "2012": 3.78,
                                    "2013": 3.95,
                                    "2014": 4.06,
                                    "2015": 4.09,
                                    "2016": 4.37,
                                    "2017": 4.61,
                                    "2018": 4.85,
                                    "2019": 4.7,
                                    "id_short": "河北",
                                    "id": "河北省",
                                    "id_english": "Hebei"
                                },
                                {
                                    "2002": 0.73,
                                    "2003": 0.88,
                                    "2004": 1.09,
                                    "2005": 1.28,
                                    "2006": 1.47,
                                    "2007": 1.81,
                                    "2008": 2.18,
                                    "2009": 2.18,
                                    "2010": 2.71,
                                    "2011": 3.29,
                                    "2012": 3.53,
                                    "2013": 3.54,
                                    "2014": 3.55,
                                    "2015": 3.54,
                                    "2016": 3.6,
                                    "2017": 4.26,
                                    "2018": 4.59,
                                    "2019": 4.62,
                                    "id_short": "山西",
                                    "id": "山西省",
                                    "id_english": "Shanxi"
                                },
                                {
                                    "2002": 0.82,
                                    "2003": 1.01,
                                    "2004": 1.28,
                                    "2005": 1.64,
                                    "2006": 2.07,
                                    "2007": 2.68,
                                    "2008": 3.54,
                                    "2009": 4.03,
                                    "2010": 4.81,
                                    "2011": 5.88,
                                    "2012": 6.46,
                                    "2013": 6.84,
                                    "2014": 7.16,
                                    "2015": 7.16,
                                    "2016": 7.26,
                                    "2017": 6.43,
                                    "2018": 6.89,
                                    "2019": 6.83,
                                    "id_short": "内蒙古",
                                    "id": "内蒙古自治区",
                                    "id_english": "Inner Mongolia"
                                },
                                {
                                    "2002": 1.31,
                                    "2003": 1.43,
                                    "2004": 1.59,
                                    "2005": 1.91,
                                    "2006": 2.21,
                                    "2007": 2.65,
                                    "2008": 3.24,
                                    "2009": 3.56,
                                    "2010": 4.29,
                                    "2011": 5.15,
                                    "2012": 5.72,
                                    "2013": 6.22,
                                    "2014": 6.53,
                                    "2015": 6.53,
                                    "2016": 5.07,
                                    "2017": 5.33,
                                    "2018": 5.78,
                                    "2019": 5.69,
                                    "id_short": "辽宁",
                                    "id": "辽宁省",
                                    "id_english": "Liaoning"
                                },
                                {
                                    "2002": 0.88,
                                    "2003": 0.99,
                                    "2004": 1.16,
                                    "2005": 1.34,
                                    "2006": 1.58,
                                    "2007": 1.95,
                                    "2008": 2.37,
                                    "2009": 2.67,
                                    "2010": 3.17,
                                    "2011": 3.87,
                                    "2012": 4.36,
                                    "2013": 4.75,
                                    "2014": 5.02,
                                    "2015": 5.11,
                                    "2016": 5.37,
                                    "2017": 5.43,
                                    "2018": 5.48,
                                    "2019": 4.29,
                                    "id_short": "吉林",
                                    "id": "吉林省",
                                    "id_english": "Jilin"
                                },
                                {
                                    "2002": 0.96,
                                    "2003": 1.07,
                                    "2004": 1.25,
                                    "2005": 1.45,
                                    "2006": 1.63,
                                    "2007": 1.86,
                                    "2008": 2.18,
                                    "2009": 2.25,
                                    "2010": 2.71,
                                    "2011": 3.29,
                                    "2012": 3.58,
                                    "2013": 3.77,
                                    "2014": 3.92,
                                    "2015": 3.93,
                                    "2016": 4.01,
                                    "2017": 4.15,
                                    "2018": 4.29,
                                    "2019": 3.58,
                                    "id_short": "黑龙江",
                                    "id": "黑龙江省",
                                    "id_english": "Heilongjiang"
                                },
                                {
                                    "2002": 3.89,
                                    "2003": 4.16,
                                    "2004": 4.84,
                                    "2005": 5.4,
                                    "2006": 5.99,
                                    "2007": 6.81,
                                    "2008": 7.44,
                                    "2009": 7.66,
                                    "2010": 8.32,
                                    "2011": 8.97,
                                    "2012": 9.13,
                                    "2013": 9.47,
                                    "2014": 10.04,
                                    "2015": 10.56,
                                    "2016": 11.67,
                                    "2017": 12.63,
                                    "2018": 13.53,
                                    "2019": 15.77,
                                    "id_short": "上海",
                                    "id": "上海市",
                                    "id_english": "Shanghai"
                                },
                                {
                                    "2002": 1.47,
                                    "2003": 1.7,
                                    "2004": 2.04,
                                    "2005": 2.51,
                                    "2006": 2.92,
                                    "2007": 3.46,
                                    "2008": 4.08,
                                    "2009": 4.5,
                                    "2010": 5.36,
                                    "2011": 6.33,
                                    "2012": 6.92,
                                    "2013": 7.59,
                                    "2014": 8.24,
                                    "2015": 8.85,
                                    "2016": 9.75,
                                    "2017": 10.79,
                                    "2018": 11.61,
                                    "2019": 12.46,
                                    "id_short": "江苏",
                                    "id": "江苏省",
                                    "id_english": "Jiangsu"
                                },
                                {
                                    "2002": 1.79,
                                    "2003": 2.07,
                                    "2004": 2.46,
                                    "2005": 2.81,
                                    "2006": 3.24,
                                    "2007": 3.81,
                                    "2008": 4.3,
                                    "2009": 4.53,
                                    "2010": 5.38,
                                    "2011": 6.2,
                                    "2012": 6.57,
                                    "2013": 6.93,
                                    "2014": 7.35,
                                    "2015": 7.83,
                                    "2016": 8.59,
                                    "2017": 9.4,
                                    "2018": 10.15,
                                    "2019": 11.15,
                                    "id_short": "浙江",
                                    "id": "浙江省",
                                    "id_english": "Zhejiang"
                                },
                                {
                                    "2002": 0.56,
                                    "2003": 0.64,
                                    "2004": 0.78,
                                    "2005": 0.87,
                                    "2006": 0.99,
                                    "2007": 1.18,
                                    "2008": 1.45,
                                    "2009": 1.65,
                                    "2010": 2.02,
                                    "2011": 2.49,
                                    "2012": 2.81,
                                    "2013": 3.23,
                                    "2014": 3.49,
                                    "2015": 3.67,
                                    "2016": 4.05,
                                    "2017": 4.44,
                                    "2018": 4.88,
                                    "2019": 5.99,
                                    "id_short": "安徽",
                                    "id": "安徽省",
                                    "id_english": "Anhui"
                                },
                                {
                                    "2002": 1.35,
                                    "2003": 1.46,
                                    "2004": 1.67,
                                    "2005": 1.89,
                                    "2006": 2.17,
                                    "2007": 2.62,
                                    "2008": 3.04,
                                    "2009": 3.41,
                                    "2010": 4.08,
                                    "2011": 4.83,
                                    "2012": 5.37,
                                    "2013": 5.92,
                                    "2014": 6.47,
                                    "2015": 6.93,
                                    "2016": 7.63,
                                    "2017": 8.46,
                                    "2018": 9.33,
                                    "2019": 10.94,
                                    "id_short": "福建",
                                    "id": "福建省",
                                    "id_english": "Fujian"
                                },
                                {
                                    "2002": 0.58,
                                    "2003": 0.68,
                                    "2004": 0.83,
                                    "2005": 0.96,
                                    "2006": 1.13,
                                    "2007": 1.35,
                                    "2008": 1.62,
                                    "2009": 1.76,
                                    "2010": 2.16,
                                    "2011": 2.66,
                                    "2012": 2.92,
                                    "2013": 3.23,
                                    "2014": 3.5,
                                    "2015": 3.71,
                                    "2016": 4.09,
                                    "2017": 4.4,
                                    "2018": 4.81,
                                    "2019": 5.39,
                                    "id_short": "江西",
                                    "id": "江西省",
                                    "id_english": "Jiangxi"
                                },
                                {
                                    "2002": 1.16,
                                    "2003": 1.34,
                                    "2004": 1.66,
                                    "2005": 2.02,
                                    "2006": 2.4,
                                    "2007": 2.81,
                                    "2008": 3.34,
                                    "2009": 3.64,
                                    "2010": 4.18,
                                    "2011": 4.82,
                                    "2012": 5.28,
                                    "2013": 5.76,
                                    "2014": 6.17,
                                    "2015": 6.51,
                                    "2016": 6.99,
                                    "2017": 7.42,
                                    "2018": 7.77,
                                    "2019": 7.14,
                                    "id_short": "山东",
                                    "id": "山东省",
                                    "id_english": "Shandong"
                                },
                                {
                                    "2002": 0.64,
                                    "2003": 0.72,
                                    "2004": 0.9,
                                    "2005": 1.1,
                                    "2006": 1.28,
                                    "2007": 1.54,
                                    "2008": 1.92,
                                    "2009": 2.07,
                                    "2010": 2.47,
                                    "2011": 2.86,
                                    "2012": 3.12,
                                    "2013": 3.42,
                                    "2014": 3.72,
                                    "2015": 3.93,
                                    "2016": 4.3,
                                    "2017": 4.72,
                                    "2018": 5.07,
                                    "2019": 5.69,
                                    "id_short": "河南",
                                    "id": "河南省",
                                    "id_english": "Henan"
                                },
                                {
                                    "2002": 0.71,
                                    "2003": 0.84,
                                    "2004": 1,
                                    "2005": 1.16,
                                    "2006": 1.34,
                                    "2007": 1.64,
                                    "2008": 1.98,
                                    "2009": 2.28,
                                    "2010": 2.8,
                                    "2011": 3.44,
                                    "2012": 3.89,
                                    "2013": 4.33,
                                    "2014": 4.75,
                                    "2015": 5.11,
                                    "2016": 5.63,
                                    "2017": 6.1,
                                    "2018": 6.73,
                                    "2019": 7.79,
                                    "id_short": "湖北",
                                    "id": "湖北省",
                                    "id_english": "Hubei"
                                },
                                {
                                    "2002": 0.64,
                                    "2003": 0.71,
                                    "2004": 0.86,
                                    "2005": 1,
                                    "2006": 1.15,
                                    "2007": 1.41,
                                    "2008": 1.83,
                                    "2009": 2.06,
                                    "2010": 2.52,
                                    "2011": 3.08,
                                    "2012": 3.46,
                                    "2013": 3.75,
                                    "2014": 4.1,
                                    "2015": 4.35,
                                    "2016": 4.72,
                                    "2017": 5.03,
                                    "2018": 5.37,
                                    "2019": 5.83,
                                    "id_short": "湖南",
                                    "id": "湖南省",
                                    "id_english": "Hunan"
                                },
                                {
                                    "2002": 1.86,
                                    "2003": 1.83,
                                    "2004": 2.16,
                                    "2005": 2.55,
                                    "2006": 2.97,
                                    "2007": 3.49,
                                    "2008": 4,
                                    "2009": 4.18,
                                    "2010": 4.76,
                                    "2011": 5.38,
                                    "2012": 5.63,
                                    "2013": 5.98,
                                    "2014": 6.46,
                                    "2015": 6.87,
                                    "2016": 7.6,
                                    "2017": 8.36,
                                    "2018": 8.97,
                                    "2019": 9.79,
                                    "id_short": "广东",
                                    "id": "广东省",
                                    "id_english": "Guangdong"
                                },
                                {
                                    "2002": 0.54,
                                    "2003": 0.59,
                                    "2004": 0.72,
                                    "2005": 0.83,
                                    "2006": 0.98,
                                    "2007": 1.19,
                                    "2008": 1.51,
                                    "2009": 1.64,
                                    "2010": 2.01,
                                    "2011": 2.43,
                                    "2012": 2.68,
                                    "2013": 3.13,
                                    "2014": 3.37,
                                    "2015": 3.59,
                                    "2016": 3.88,
                                    "2017": 3.9,
                                    "2018": 4.24,
                                    "2019": 4.39,
                                    "id_short": "广西",
                                    "id": "广西壮族自治区",
                                    "id_english": "Guangxi Zhuang Autonomous Region"
                                },
                                {
                                    "2002": 0.82,
                                    "2003": 0.88,
                                    "2004": 1,
                                    "2005": 1.12,
                                    "2006": 1.29,
                                    "2007": 1.53,
                                    "2008": 1.82,
                                    "2009": 1.98,
                                    "2010": 2.44,
                                    "2011": 2.95,
                                    "2012": 3.31,
                                    "2013": 3.66,
                                    "2014": 3.99,
                                    "2015": 4.17,
                                    "2016": 4.53,
                                    "2017": 4.94,
                                    "2018": 5.3,
                                    "2019": 5.79,
                                    "id_short": "海南",
                                    "id": "海南省",
                                    "id_english": "Hainan"
                                },
                                {
                                    "2002": 0.65,
                                    "2003": 0.8,
                                    "2004": 0.95,
                                    "2005": 1.23,
                                    "2006": 1.39,
                                    "2007": 1.67,
                                    "2008": 2.07,
                                    "2009": 2.33,
                                    "2010": 2.81,
                                    "2011": 3.53,
                                    "2012": 3.99,
                                    "2013": 4.43,
                                    "2014": 4.89,
                                    "2015": 5.34,
                                    "2016": 5.97,
                                    "2017": 6.49,
                                    "2018": 6.75,
                                    "2019": 7.74,
                                    "id_short": "重庆",
                                    "id": "重庆市",
                                    "id_english": "Chongqing"
                                },
                                {
                                    "2002": 0.55,
                                    "2003": 0.64,
                                    "2004": 0.78,
                                    "2005": 0.91,
                                    "2006": 1.06,
                                    "2007": 1.31,
                                    "2008": 1.53,
                                    "2009": 1.73,
                                    "2010": 2.11,
                                    "2011": 2.58,
                                    "2012": 2.92,
                                    "2013": 3.28,
                                    "2014": 3.54,
                                    "2015": 3.72,
                                    "2016": 4.06,
                                    "2017": 4.54,
                                    "2018": 4.96,
                                    "2019": 5.64,
                                    "id_short": "四川",
                                    "id": "四川省",
                                    "id_english": "Sichuan"
                                },
                                {
                                    "2002": 0.34,
                                    "2003": 0.38,
                                    "2004": 0.44,
                                    "2005": 0.52,
                                    "2006": 0.6,
                                    "2007": 0.74,
                                    "2008": 0.95,
                                    "2009": 1.06,
                                    "2010": 1.27,
                                    "2011": 1.59,
                                    "2012": 1.94,
                                    "2013": 2.32,
                                    "2014": 2.67,
                                    "2015": 3.01,
                                    "2016": 3.36,
                                    "2017": 3.86,
                                    "2018": 4.19,
                                    "2019": 4.72,
                                    "id_short": "贵州",
                                    "id": "贵州省",
                                    "id_english": "Guizhou"
                                },
                                {
                                    "2002": 0.55,
                                    "2003": 0.6,
                                    "2004": 0.72,
                                    "2005": 0.8,
                                    "2006": 0.91,
                                    "2007": 1.08,
                                    "2008": 1.28,
                                    "2009": 1.38,
                                    "2010": 1.6,
                                    "2011": 1.96,
                                    "2012": 2.26,
                                    "2013": 2.57,
                                    "2014": 2.77,
                                    "2015": 2.92,
                                    "2016": 3.16,
                                    "2017": 3.47,
                                    "2018": 3.77,
                                    "2019": 4.87,
                                    "id_short": "云南",
                                    "id": "云南省",
                                    "id_english": "Yunnan"
                                },
                                {
                                    "2002": 0.65,
                                    "2003": 0.73,
                                    "2004": 0.84,
                                    "2005": 0.93,
                                    "2006": 1.08,
                                    "2007": 1.25,
                                    "2008": 1.41,
                                    "2009": 1.55,
                                    "2010": 1.76,
                                    "2011": 2.07,
                                    "2012": 2.37,
                                    "2013": 2.72,
                                    "2014": 3.04,
                                    "2015": 3.33,
                                    "2016": 3.69,
                                    "2017": 4.12,
                                    "2018": 4.56,
                                    "2019": 5.13,
                                    "id_short": "西藏",
                                    "id": "西藏自治区",
                                    "id_english": "Tibet Autonomous Region"
                                },
                                {
                                    "2002": 0.62,
                                    "2003": 0.71,
                                    "2004": 0.87,
                                    "2005": 1.07,
                                    "2006": 1.29,
                                    "2007": 1.56,
                                    "2008": 1.98,
                                    "2009": 2.21,
                                    "2010": 2.73,
                                    "2011": 3.37,
                                    "2012": 3.88,
                                    "2013": 4.34,
                                    "2014": 4.73,
                                    "2015": 4.8,
                                    "2016": 5.15,
                                    "2017": 5.8,
                                    "2018": 6.44,
                                    "2019": 6.76,
                                    "id_short": "陕西",
                                    "id": "陕西省",
                                    "id_english": "Shaanxi"
                                },
                                {
                                    "2002": 0.48,
                                    "2003": 0.56,
                                    "2004": 0.67,
                                    "2005": 0.76,
                                    "2006": 0.9,
                                    "2007": 1.06,
                                    "2008": 1.24,
                                    "2009": 1.33,
                                    "2010": 1.62,
                                    "2011": 1.97,
                                    "2012": 2.21,
                                    "2013": 2.47,
                                    "2014": 2.67,
                                    "2015": 2.63,
                                    "2016": 2.79,
                                    "2017": 2.88,
                                    "2018": 3.17,
                                    "2019": 3.34,
                                    "id_short": "甘肃",
                                    "id": "甘肃省",
                                    "id_english": "Gansu"
                                },
                                {
                                    "2002": 0.67,
                                    "2003": 0.75,
                                    "2004": 0.89,
                                    "2005": 1.03,
                                    "2006": 1.21,
                                    "2007": 1.48,
                                    "2008": 1.88,
                                    "2009": 1.97,
                                    "2010": 2.45,
                                    "2011": 3.02,
                                    "2012": 3.4,
                                    "2013": 3.77,
                                    "2014": 4.06,
                                    "2015": 4.22,
                                    "2016": 4.45,
                                    "2017": 4.5,
                                    "2018": 4.87,
                                    "2019": 5,
                                    "id_short": "青海",
                                    "id": "青海省",
                                    "id_english": "Qinghai"
                                },
                                {
                                    "2002": 0.69,
                                    "2003": 0.8,
                                    "2004": 0.95,
                                    "2005": 1.07,
                                    "2006": 1.25,
                                    "2007": 1.56,
                                    "2008": 2.02,
                                    "2009": 2.24,
                                    "2010": 2.77,
                                    "2011": 3.4,
                                    "2012": 3.75,
                                    "2013": 4.07,
                                    "2014": 4.31,
                                    "2015": 4.5,
                                    "2016": 4.84,
                                    "2017": 5.2,
                                    "2018": 5.55,
                                    "2019": 5.55,
                                    "id_short": "宁夏",
                                    "id": "宁夏回族自治区",
                                    "id_english": "Ningxia Hui Autonomous Region"
                                },
                                {
                                    "2002": 0.91,
                                    "2003": 1.02,
                                    "2004": 1.18,
                                    "2005": 1.37,
                                    "2006": 1.57,
                                    "2007": 1.79,
                                    "2008": 2.08,
                                    "2009": 2.09,
                                    "2010": 2.6,
                                    "2011": 3.1,
                                    "2012": 3.48,
                                    "2013": 3.86,
                                    "2014": 4.2,
                                    "2015": 4.18,
                                    "2016": 4.26,
                                    "2017": 4.74,
                                    "2018": 5.17,
                                    "2019": 5.67,
                                    "id_short": "新疆",
                                    "id": "新疆维吾尔自治区",
                                    "id_english": "Xinjiang Uyghur Autonomous Region"
                                }
                            ]
                        },
                        "key": "id",
                        "fields": [] // We'll dynamically set this later
                    }
                }
            ],
            "mark": { "type": "geoshape", "stroke": "white" },
            "encoding": {
                "color": { "field": "", "type": "quantitative" }, // We'll dynamically set the field and title later
                "tooltip": [
                    { "field": "id_english", "type": "nominal", "title": "Province" },
                    { "field": "id_english", "type": "nominal", "title": "Province" }
                ]
            },
            "config": {}
        };


        function updateChart() {
            const selectedYear = document.getElementById('yearSlider').value;
            document.getElementById('selectedYear').textContent = selectedYear;

            const spec = JSON.parse(JSON.stringify(baseSpec));  // Create a deep copy of the base specification

            spec.transform[0].from.fields = [selectedYear, "id_english"];
            spec.encoding.color.field = selectedYear;
            spec.encoding.color.title = "GDP in " + selectedYear;
            spec.encoding.tooltip[1] =
                { "field": selectedYear, "type": "quantitative", "title": "GDP in " + selectedYear }


            vegaEmbed('#vis2', spec, { mode: 'vega-lite' });
        }

        // Initialize the chart
        updateChart();

    </script>

</body>

</html>